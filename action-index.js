var Zi=Object.create;var gr=Object.defineProperty;var eo=Object.getOwnPropertyDescriptor;var to=Object.getOwnPropertyNames;var ro=Object.getPrototypeOf,so=Object.prototype.hasOwnProperty;var no=e=>gr(e,"__esModule",{value:!0});var o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var io=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of to(t))!so.call(e,s)&&s!=="default"&&gr(e,s,{get:()=>t[s],enumerable:!(r=eo(t,s))||r.enumerable});return e},ts=e=>io(no(gr(e!=null?Zi(ro(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var rs=(e,t,r)=>new Promise((s,n)=>{var i=d=>{try{c(r.next(d))}catch(g){n(g)}},a=d=>{try{c(r.throw(d))}catch(g){n(g)}},c=d=>d.done?s(d.value):Promise.resolve(d.value).then(i,a);c((r=r.apply(e,t)).next())});var rt=o(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.toCommandValue=void 0;function oo(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}tt.toCommandValue=oo});var us=o(I=>{"use strict";var uo=I&&I.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),ao=I&&I.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),co=I&&I.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&uo(t,e,r);return ao(t,e),t};Object.defineProperty(I,"__esModule",{value:!0});I.issue=I.issueCommand=void 0;var lo=co(require("os")),ss=rt();function ns(e,t,r){let s=new os(e,t,r);process.stdout.write(s.toString()+lo.EOL)}I.issueCommand=ns;function fo(e,t=""){ns(e,{},t)}I.issue=fo;var is="::",os=class{constructor(t,r,s){t||(t="missing.command"),this.command=t,this.properties=r,this.message=s}toString(){let t=is+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let s in this.properties)if(this.properties.hasOwnProperty(s)){let n=this.properties[s];n&&(r?r=!1:t+=",",t+=`${s}=${go(n)}`)}}return t+=`${is}${po(this.message)}`,t}};function po(e){return ss.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function go(e){return ss.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var ls=o(H=>{"use strict";var ho=H&&H.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),mo=H&&H.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),as=H&&H.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&ho(t,e,r);return mo(t,e),t};Object.defineProperty(H,"__esModule",{value:!0});H.issueCommand=void 0;var cs=as(require("fs")),_o=as(require("os")),yo=rt();function bo(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!cs.existsSync(r))throw new Error(`Missing file at path: ${r}`);cs.appendFileSync(r,`${yo.toCommandValue(t)}${_o.EOL}`,{encoding:"utf8"})}H.issueCommand=bo});var _s=o(p=>{"use strict";var To=p&&p.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),ko=p&&p.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),fs=p&&p.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&To(t,e,r);return ko(t,e),t},vo=p&&p.__awaiter||function(e,t,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function c(u){try{g(s.next(u))}catch(l){a(l)}}function d(u){try{g(s.throw(u))}catch(l){a(l)}}function g(u){u.done?i(u.value):n(u.value).then(c,d)}g((s=s.apply(e,t||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0});p.getState=p.saveState=p.group=p.endGroup=p.startGroup=p.info=p.warning=p.error=p.debug=p.isDebug=p.setFailed=p.setCommandEcho=p.setOutput=p.getBooleanInput=p.getMultilineInput=p.getInput=p.addPath=p.setSecret=p.exportVariable=p.ExitCode=void 0;var $=us(),ds=ls(),Oo=rt(),st=fs(require("os")),Co=fs(require("path")),ps;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(ps=p.ExitCode||(p.ExitCode={}));function Eo(e,t){let r=Oo.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||""){let n="_GitHubActionsFileCommandDelimeter_",i=`${e}<<${n}${st.EOL}${r}${st.EOL}${n}`;ds.issueCommand("ENV",i)}else $.issueCommand("set-env",{name:e},r)}p.exportVariable=Eo;function So(e){$.issueCommand("add-mask",{},e)}p.setSecret=So;function Po(e){process.env.GITHUB_PATH||""?ds.issueCommand("PATH",e):$.issueCommand("add-path",{},e),process.env.PATH=`${e}${Co.delimiter}${process.env.PATH}`}p.addPath=Po;function hr(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}p.getInput=hr;function Ro(e,t){return hr(e,t).split(`
`).filter(s=>s!=="")}p.getMultilineInput=Ro;function wo(e,t){let r=["true","True","TRUE"],s=["false","False","FALSE"],n=hr(e,t);if(r.includes(n))return!0;if(s.includes(n))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}p.getBooleanInput=wo;function Mo(e,t){process.stdout.write(st.EOL),$.issueCommand("set-output",{name:e},t)}p.setOutput=Mo;function Do(e){$.issue("echo",e?"on":"off")}p.setCommandEcho=Do;function jo(e){process.exitCode=ps.Failure,gs(e)}p.setFailed=jo;function qo(){return process.env.RUNNER_DEBUG==="1"}p.isDebug=qo;function Ao(e){$.issueCommand("debug",{},e)}p.debug=Ao;function gs(e){$.issue("error",e instanceof Error?e.toString():e)}p.error=gs;function Fo(e){$.issue("warning",e instanceof Error?e.toString():e)}p.warning=Fo;function Lo(e){process.stdout.write(e+st.EOL)}p.info=Lo;function hs(e){$.issue("group",e)}p.startGroup=hs;function ms(){$.issue("endgroup")}p.endGroup=ms;function Io(e,t){return vo(this,void 0,void 0,function*(){hs(e);let r;try{r=yield t()}finally{ms()}return r})}p.group=Io;function No(e,t){$.issueCommand("save-state",{name:e},t)}p.saveState=No;function Bo(e){return process.env[`STATE_${e}`]||""}p.getState=Bo});var Q=o(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.GitError=void 0;var ys=class extends Error{constructor(t,r){super(r);this.task=t,Object.setPrototypeOf(this,new.target.prototype)}};nt.GitError=ys});var me=o(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.GitResponseError=void 0;var xo=Q(),bs=class extends xo.GitError{constructor(t,r){super(void 0,r||String(t));this.git=t}};it.GitResponseError=bs});var ks=o(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.GitConstructError=void 0;var Go=Q(),Ts=class extends Go.GitError{constructor(t,r){super(void 0,r);this.config=t}};ot.GitConstructError=Ts});var mr=o(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.GitPluginError=void 0;var $o=Q(),vs=class extends $o.GitError{constructor(t,r,s){super(t,s);this.task=t,this.plugin=r,Object.setPrototypeOf(this,new.target.prototype)}};ut.GitPluginError=vs});var _r=o(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.TaskConfigurationError=void 0;var Uo=Q(),Os=class extends Uo.GitError{constructor(t){super(void 0,t)}};at.TaskConfigurationError=Os});var Es=o((Ud,Cs)=>{var _e=1e3,ye=_e*60,be=ye*60,oe=be*24,Wo=oe*7,Ho=oe*365.25;Cs.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Vo(e);if(r==="number"&&isFinite(e))return t.long?Yo(e):zo(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Vo(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),s=(t[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return r*Ho;case"weeks":case"week":case"w":return r*Wo;case"days":case"day":case"d":return r*oe;case"hours":case"hour":case"hrs":case"hr":case"h":return r*be;case"minutes":case"minute":case"mins":case"min":case"m":return r*ye;case"seconds":case"second":case"secs":case"sec":case"s":return r*_e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function zo(e){var t=Math.abs(e);return t>=oe?Math.round(e/oe)+"d":t>=be?Math.round(e/be)+"h":t>=ye?Math.round(e/ye)+"m":t>=_e?Math.round(e/_e)+"s":e+"ms"}function Yo(e){var t=Math.abs(e);return t>=oe?ct(e,t,oe,"day"):t>=be?ct(e,t,be,"hour"):t>=ye?ct(e,t,ye,"minute"):t>=_e?ct(e,t,_e,"second"):e+" ms"}function ct(e,t,r,s){var n=t>=r*1.5;return Math.round(e/r)+" "+s+(n?"s":"")}});var yr=o((Wd,Ss)=>{function Ko(e){r.debug=r,r.default=r,r.coerce=d,r.disable=i,r.enable=n,r.enabled=a,r.humanize=Es(),r.destroy=g,Object.keys(e).forEach(u=>{r[u]=e[u]}),r.names=[],r.skips=[],r.formatters={};function t(u){let l=0;for(let b=0;b<u.length;b++)l=(l<<5)-l+u.charCodeAt(b),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=t;function r(u){let l,b=null,j,R;function v(...w){if(!v.enabled)return;let ie=v,Ze=Number(new Date),Qi=Ze-(l||Ze);ie.diff=Qi,ie.prev=l,ie.curr=Ze,l=Ze,w[0]=r.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let et=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(pr,Xi)=>{if(pr==="%%")return"%";et++;let es=r.formatters[Xi];if(typeof es=="function"){let Ji=w[et];pr=es.call(ie,Ji),w.splice(et,1),et--}return pr}),r.formatArgs.call(ie,w),(ie.log||r.log).apply(ie,w)}return v.namespace=u,v.useColors=r.useColors(),v.color=r.selectColor(u),v.extend=s,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(j!==r.namespaces&&(j=r.namespaces,R=r.enabled(u)),R),set:w=>{b=w}}),typeof r.init=="function"&&r.init(v),v}function s(u,l){let b=r(this.namespace+(typeof l=="undefined"?":":l)+u);return b.log=this.log,b}function n(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let l,b=(typeof u=="string"?u:"").split(/[\s,]+/),j=b.length;for(l=0;l<j;l++)!b[l]||(u=b[l].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function i(){let u=[...r.names.map(c),...r.skips.map(c).map(l=>"-"+l)].join(",");return r.enable(""),u}function a(u){if(u[u.length-1]==="*")return!0;let l,b;for(l=0,b=r.skips.length;l<b;l++)if(r.skips[l].test(u))return!1;for(l=0,b=r.names.length;l<b;l++)if(r.names[l].test(u))return!0;return!1}function c(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function d(u){return u instanceof Error?u.stack||u.message:u}function g(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Ss.exports=Ko});var Ps=o((q,lt)=>{q.formatArgs=Xo;q.save=Jo;q.load=Zo;q.useColors=Qo;q.storage=eu();q.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();q.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Qo(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Xo(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+lt.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,s=0;e[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(s=r))}),e.splice(s,0,t)}q.log=console.debug||console.log||(()=>{});function Jo(e){try{e?q.storage.setItem("debug",e):q.storage.removeItem("debug")}catch(t){}}function Zo(){let e;try{e=q.storage.getItem("debug")}catch(t){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}function eu(){try{return localStorage}catch(e){}}lt.exports=yr()(q);var{formatters:tu}=lt.exports;tu.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var ws=o((P,dt)=>{var ru=require("tty"),ft=require("util");P.init=cu;P.log=ou;P.formatArgs=nu;P.save=uu;P.load=au;P.useColors=su;P.destroy=ft.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");P.colors=[6,2,3,4,5,1];try{let e=require("supports-color");e&&(e.stderr||e).level>=2&&(P.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}P.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,i)=>i.toUpperCase()),s=process.env[t];return/^(yes|on|true|enabled)$/i.test(s)?s=!0:/^(no|off|false|disabled)$/i.test(s)?s=!1:s==="null"?s=null:s=Number(s),e[r]=s,e},{});function su(){return"colors"in P.inspectOpts?Boolean(P.inspectOpts.colors):ru.isatty(process.stderr.fd)}function nu(e){let{namespace:t,useColors:r}=this;if(r){let s=this.color,n="[3"+(s<8?s:"8;5;"+s),i=`  ${n};1m${t} [0m`;e[0]=i+e[0].split(`
`).join(`
`+i),e.push(n+"m+"+dt.exports.humanize(this.diff)+"[0m")}else e[0]=iu()+t+" "+e[0]}function iu(){return P.inspectOpts.hideDate?"":new Date().toISOString()+" "}function ou(...e){return process.stderr.write(ft.format(...e)+`
`)}function uu(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function au(){return process.env.DEBUG}function cu(e){e.inspectOpts={};let t=Object.keys(P.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=P.inspectOpts[t[r]]}dt.exports=yr()(P);var{formatters:Rs}=dt.exports;Rs.o=function(e){return this.inspectOpts.colors=this.useColors,ft.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};Rs.O=function(e){return this.inspectOpts.colors=this.useColors,ft.inspect(e,this.inspectOpts)}});var Tr=o((Hd,br)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?br.exports=Ps():br.exports=ws()});var Ms=o(A=>{"use strict";var lu=A&&A.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(A,"__esModule",{value:!0});var fu=require("fs"),du=lu(Tr()),Te=du.default("@kwsites/file-exists");function pu(e,t,r){Te("checking %s",e);try{let s=fu.statSync(e);return s.isFile()&&t?(Te("[OK] path represents a file"),!0):s.isDirectory()&&r?(Te("[OK] path represents a directory"),!0):(Te("[FAIL] path represents something other than a file or directory"),!1)}catch(s){if(s.code==="ENOENT")return Te("[FAIL] path is not accessible: %o",s),!1;throw Te("[FATAL] %o",s),s}}function gu(e,t=A.READABLE){return pu(e,(t&A.FILE)>0,(t&A.FOLDER)>0)}A.exists=gu;A.FILE=1;A.FOLDER=2;A.READABLE=A.FILE+A.FOLDER});var Ds=o(pt=>{"use strict";function hu(e){for(var t in e)pt.hasOwnProperty(t)||(pt[t]=e[t])}Object.defineProperty(pt,"__esModule",{value:!0});hu(Ms())});var Ve=o(m=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});m.pick=m.bufferToString=m.prefixedArray=m.asNumber=m.asStringArray=m.asArray=m.objectToString=m.remove=m.including=m.append=m.folderExists=m.forEachLineWithContent=m.toLinesWithContent=m.last=m.first=m.splitOn=m.isUserFunction=m.asFunction=m.NOOP=void 0;var js=Ds(),mu=()=>{};m.NOOP=mu;function _u(e){return typeof e=="function"?e:m.NOOP}m.asFunction=_u;function yu(e){return typeof e=="function"&&e!==m.NOOP}m.isUserFunction=yu;function bu(e,t){let r=e.indexOf(t);return r<=0?[e,""]:[e.substr(0,r),e.substr(r+1)]}m.splitOn=bu;function Tu(e,t=0){return qs(e)&&e.length>t?e[t]:void 0}m.first=Tu;function ku(e,t=0){if(qs(e)&&e.length>t)return e[e.length-1-t]}m.last=ku;function qs(e){return!!(e&&typeof e.length=="number")}function As(e,t=!0,r=`
`){return e.split(r).reduce((s,n)=>{let i=t?n.trim():n;return i&&s.push(i),s},[])}m.toLinesWithContent=As;function vu(e,t){return As(e,!0).map(r=>t(r))}m.forEachLineWithContent=vu;function Ou(e){return js.exists(e,js.FOLDER)}m.folderExists=Ou;function Cu(e,t){return Array.isArray(e)?e.includes(t)||e.push(t):e.add(t),t}m.append=Cu;function Eu(e,t){return Array.isArray(e)&&!e.includes(t)&&e.push(t),e}m.including=Eu;function Su(e,t){if(Array.isArray(e)){let r=e.indexOf(t);r>=0&&e.splice(r,1)}else e.delete(t);return t}m.remove=Su;m.objectToString=Object.prototype.toString.call.bind(Object.prototype.toString);function Fs(e){return Array.isArray(e)?e:[e]}m.asArray=Fs;function Pu(e){return Fs(e).map(String)}m.asStringArray=Pu;function Ru(e,t=0){if(e==null)return t;let r=parseInt(e,10);return isNaN(r)?t:r}m.asNumber=Ru;function wu(e,t){let r=[];for(let s=0,n=e.length;s<n;s++)r.push(t,e[s]);return r}m.prefixedArray=wu;function Mu(e){return(Array.isArray(e)?Buffer.concat(e):e).toString("utf-8")}m.bufferToString=Mu;function Du(e,t){return Object.assign({},...t.map(r=>r in e?{[r]:e[r]}:{}))}m.pick=Du});var kr=o(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.filterHasLength=k.filterFunction=k.filterPlainObject=k.filterStringOrStringArray=k.filterStringArray=k.filterString=k.filterPrimitives=k.filterArray=k.filterType=void 0;var ju=Ve();function qu(e,t,r){return t(e)?e:arguments.length>2?r:void 0}k.filterType=qu;var Au=e=>Array.isArray(e);k.filterArray=Au;function Fu(e,t){return/number|string|boolean/.test(typeof e)&&(!t||!t.includes(typeof e))}k.filterPrimitives=Fu;var Lu=e=>typeof e=="string";k.filterString=Lu;var Iu=e=>Array.isArray(e)&&e.every(k.filterString);k.filterStringArray=Iu;var Nu=e=>k.filterString(e)||Array.isArray(e)&&e.every(k.filterString);k.filterStringOrStringArray=Nu;function Bu(e){return!!e&&ju.objectToString(e)==="[object Object]"}k.filterPlainObject=Bu;function xu(e){return typeof e=="function"}k.filterFunction=xu;var Gu=e=>e==null||"number|boolean|function".includes(typeof e)?!1:Array.isArray(e)||typeof e=="string"||typeof e.length=="number";k.filterHasLength=Gu});var Ls=o(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.ExitCodes=void 0;var $u;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR",e[e.UNCLEAN=128]="UNCLEAN"})($u=ze.ExitCodes||(ze.ExitCodes={}))});var Is=o(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.GitOutputStreams=void 0;var gt=class{constructor(t,r){this.stdOut=t,this.stdErr=r}asStrings(){return new gt(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}};ht.GitOutputStreams=gt});var Bs=o(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.RemoteLineParser=ke.LineParser=void 0;var vr=class{constructor(t,r){this.matches=[],this.parse=(s,n)=>(this.resetMatches(),this._regExp.every((i,a)=>this.addMatch(i,a,s(a)))?this.useMatches(n,this.prepareMatches())!==!1:!1),this._regExp=Array.isArray(t)?t:[t],r&&(this.useMatches=r)}useMatches(t,r){throw new Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(t,r,s){let n=s&&t.exec(s);return n&&this.pushMatch(r,n),!!n}pushMatch(t,r){this.matches.push(...r.slice(1))}};ke.LineParser=vr;var Ns=class extends vr{addMatch(t,r,s){return/^remote:\s/.test(String(s))&&super.addMatch(t,r,s)}pushMatch(t,r){(t>0||r.length>1)&&super.pushMatch(t,r)}};ke.RemoteLineParser=Ns});var xs=o(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.createInstanceConfig=void 0;var Uu={binary:"git",maxConcurrentProcesses:5,config:[]};function Wu(...e){let t=process.cwd(),r=Object.assign(Object.assign({baseDir:t},Uu),...e.filter(s=>typeof s=="object"&&s));return r.baseDir=r.baseDir||t,r}mt.createInstanceConfig=Wu});var Us=o(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.trailingFunctionArgument=V.trailingOptionsArgument=V.getTrailingOptions=V.appendTaskOptions=void 0;var ue=kr(),ae=Ve();function Gs(e,t=[]){return ue.filterPlainObject(e)?Object.keys(e).reduce((r,s)=>{let n=e[s];return ue.filterPrimitives(n,["boolean"])?r.push(s+"="+n):r.push(s),r},t):t}V.appendTaskOptions=Gs;function Hu(e,t=0,r=!1){let s=[];for(let n=0,i=t<0?e.length:t;n<i;n++)"string|number".includes(typeof e[n])&&s.push(String(e[n]));return Gs($s(e),s),r||s.push(...Vu(e)),s}V.getTrailingOptions=Hu;function Vu(e){let t=typeof ae.last(e)=="function";return ue.filterType(ae.last(e,t?1:0),ue.filterArray,[])}function $s(e){let t=ue.filterFunction(ae.last(e));return ue.filterType(ae.last(e,t?1:0),ue.filterPlainObject)}V.trailingOptionsArgument=$s;function zu(e,t=!0){let r=ae.asFunction(ae.last(e));return t||ae.isUserFunction(r)?r:void 0}V.trailingFunctionArgument=zu});var Ws=o(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.parseStringResponse=ve.callTaskParser=void 0;var Yu=Ve();function Ku(e,t){return e(t.stdOut,t.stdErr)}ve.callTaskParser=Ku;function Qu(e,t,...r){return r.forEach(s=>{for(let n=Yu.toLinesWithContent(s),i=0,a=n.length;i<a;i++){let c=(d=0)=>{if(!(i+d>=a))return n[i+d]};t.some(({parse:d})=>d(c,e))}}),e}ve.parseStringResponse=Qu});var _=o(M=>{"use strict";var Xu=M&&M.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),J=M&&M.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Xu(t,e,r)};Object.defineProperty(M,"__esModule",{value:!0});J(kr(),M);J(Ls(),M);J(Is(),M);J(Bs(),M);J(xs(),M);J(Us(),M);J(Ws(),M);J(Ve(),M)});var Er=o(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.checkIsBareRepoTask=U.checkIsRepoRootTask=U.checkIsRepoTask=U.CheckRepoActions=void 0;var Ju=_(),Or;(function(e){e.BARE="bare",e.IN_TREE="tree",e.IS_REPO_ROOT="root"})(Or=U.CheckRepoActions||(U.CheckRepoActions={}));var Cr=({exitCode:e},t,r,s)=>{if(e===Ju.ExitCodes.UNCLEAN&&ea(t))return r(Buffer.from("false"));s(t)},Hs=e=>e.trim()==="true";function Zu(e){switch(e){case Or.BARE:return zs();case Or.IS_REPO_ROOT:return Vs()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:Cr,parser:Hs}}U.checkIsRepoTask=Zu;function Vs(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:Cr,parser(t){return/^\.(git)?$/.test(t.trim())}}}U.checkIsRepoRootTask=Vs;function zs(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:Cr,parser:Hs}}U.checkIsBareRepoTask=zs;function ea(e){return/(Not a git repository|Kein Git-Repository)/i.test(String(e))}});var Ys=o(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.cleanSummaryParser=Oe.CleanResponse=void 0;var ta=_(),Sr=class{constructor(t){this.dryRun=t,this.paths=[],this.files=[],this.folders=[]}};Oe.CleanResponse=Sr;var ra=/^[a-z]+\s*/i,sa=/^[a-z]+\s+[a-z]+\s*/i,na=/\/$/;function ia(e,t){let r=new Sr(e),s=e?sa:ra;return ta.toLinesWithContent(t).forEach(n=>{let i=n.replace(s,"");r.paths.push(i),(na.test(i)?r.folders:r.files).push(i)}),r}Oe.cleanSummaryParser=ia});var D=o(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.isEmptyTask=S.isBufferTask=S.straightThroughBufferTask=S.straightThroughStringTask=S.configurationErrorTask=S.adhocExecTask=S.EMPTY_COMMANDS=void 0;var oa=_r();S.EMPTY_COMMANDS=[];function ua(e){return{commands:S.EMPTY_COMMANDS,format:"empty",parser:e}}S.adhocExecTask=ua;function aa(e){return{commands:S.EMPTY_COMMANDS,format:"empty",parser(){throw typeof e=="string"?new oa.TaskConfigurationError(e):e}}}S.configurationErrorTask=aa;function ca(e,t=!1){return{commands:e,format:"utf-8",parser(r){return t?String(r).trim():r}}}S.straightThroughStringTask=ca;function la(e){return{commands:e,format:"buffer",parser(t){return t}}}S.straightThroughBufferTask=la;function fa(e){return e.format==="buffer"}S.isBufferTask=fa;function da(e){return e.format==="empty"||!e.commands.length}S.isEmptyTask=da});var Rr=o(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.isCleanOptionsArray=C.cleanTask=C.cleanWithOptionsTask=C.CleanOptions=C.CONFIG_ERROR_UNKNOWN_OPTION=C.CONFIG_ERROR_MODE_REQUIRED=C.CONFIG_ERROR_INTERACTIVE_MODE=void 0;var pa=Ys(),ga=_(),Pr=D();C.CONFIG_ERROR_INTERACTIVE_MODE="Git clean interactive mode is not supported";C.CONFIG_ERROR_MODE_REQUIRED='Git clean mode parameter ("n" or "f") is required';C.CONFIG_ERROR_UNKNOWN_OPTION="Git clean unknown option found in: ";var Ye;(function(e){e.DRY_RUN="n",e.FORCE="f",e.IGNORED_INCLUDED="x",e.IGNORED_ONLY="X",e.EXCLUDING="e",e.QUIET="q",e.RECURSIVE="d"})(Ye=C.CleanOptions||(C.CleanOptions={}));var Ks=new Set(["i",...ga.asStringArray(Object.values(Ye))]);function ha(e,t){let{cleanMode:r,options:s,valid:n}=_a(e);return r?n.options?(s.push(...t),s.some(Ta)?Pr.configurationErrorTask(C.CONFIG_ERROR_INTERACTIVE_MODE):Qs(r,s)):Pr.configurationErrorTask(C.CONFIG_ERROR_UNKNOWN_OPTION+JSON.stringify(e)):Pr.configurationErrorTask(C.CONFIG_ERROR_MODE_REQUIRED)}C.cleanWithOptionsTask=ha;function Qs(e,t){return{commands:["clean",`-${e}`,...t],format:"utf-8",parser(s){return pa.cleanSummaryParser(e===Ye.DRY_RUN,s)}}}C.cleanTask=Qs;function ma(e){return Array.isArray(e)&&e.every(t=>Ks.has(t))}C.isCleanOptionsArray=ma;function _a(e){let t,r=[],s={cleanMode:!1,options:!0};return e.replace(/[^a-z]i/g,"").split("").forEach(n=>{ya(n)?(t=n,s.cleanMode=!0):s.options=s.options&&ba(r[r.length]=`-${n}`)}),{cleanMode:t,options:r,valid:s}}function ya(e){return e===Ye.FORCE||e===Ye.DRY_RUN}function ba(e){return/^-[a-z]$/i.test(e)&&Ks.has(e.charAt(1))}function Ta(e){return/^-[^\-]/.test(e)?e.indexOf("i")>0:e==="--interactive"}});var Js=o(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.configListParser=Ce.ConfigList=void 0;var Xs=_(),wr=class{constructor(){this.files=[],this.values=Object.create(null)}get all(){return this._all||(this._all=this.files.reduce((t,r)=>Object.assign(t,this.values[r]),{})),this._all}addFile(t){if(!(t in this.values)){let r=Xs.last(this.files);this.values[t]=r?Object.create(this.values[r]):{},this.files.push(t)}return this.values[t]}addValue(t,r,s){let n=this.addFile(t);n.hasOwnProperty(r)?Array.isArray(n[r])?n[r].push(s):n[r]=[n[r],s]:n[r]=s,this._all=void 0}};Ce.ConfigList=wr;function ka(e){let t=new wr,r=e.split("\0");for(let s=0,n=r.length-1;s<n;){let i=va(r[s++]),[a,c]=Xs.splitOn(r[s++],`
`);t.addValue(i,a,c)}return t}Ce.configListParser=ka;function va(e){return e.replace(/^(file):/,"")}});var Dr=o(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.GitConfigScope=void 0;var Oa=Js(),Zs=_(),Mr;(function(e){e.system="system",e.global="global",e.local="local",e.worktree="worktree"})(Mr=Ee.GitConfigScope||(Ee.GitConfigScope={}));function Ca(e){return typeof e=="string"&&Mr.hasOwnProperty(e)?e:Mr.local}function Ea(e,t,r,s){let n=["config",`--${s}`];return r&&n.push("--add"),n.push(e,t),{commands:n,format:"utf-8",parser(i){return i}}}function Sa(){return{commands:["config","--list","--show-origin","--null"],format:"utf-8",parser(e){return Oa.configListParser(e)}}}function Pa(){return{addConfig(e,t,...r){return this._runTask(Ea(e,t,r[0]===!0,Ca(r[1])),Zs.trailingFunctionArgument(arguments))},listConfig(){return this._runTask(Sa(),Zs.trailingFunctionArgument(arguments))}}}Ee.default=Pa});var qr=o(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.getResetMode=X.resetTask=X.ResetMode=void 0;var Ra=D(),jr;(function(e){e.MIXED="mixed",e.SOFT="soft",e.HARD="hard",e.MERGE="merge",e.KEEP="keep"})(jr=X.ResetMode||(X.ResetMode={}));var wa=Array.from(Object.values(jr));function Ma(e,t){let r=["reset"];return en(e)&&r.push(`--${e}`),r.push(...t),Ra.straightThroughStringTask(r)}X.resetTask=Ma;function Da(e){if(en(e))return e;switch(typeof e){case"string":case"undefined":return jr.SOFT}}X.getResetMode=Da;function en(e){return wa.includes(e)}});var tn=o(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});var ja=ks(),qa=Q(),Aa=mr(),Fa=me(),La=_r(),Ia=Er(),Na=Rr(),Ba=Dr(),xa=qr(),Ga={CheckRepoActions:Ia.CheckRepoActions,CleanOptions:Na.CleanOptions,GitConfigScope:Ba.GitConfigScope,GitConstructError:ja.GitConstructError,GitError:qa.GitError,GitPluginError:Aa.GitPluginError,GitResponseError:Fa.GitResponseError,ResetMode:xa.ResetMode,TaskConfigurationError:La.TaskConfigurationError};Ar.default=Ga});var rn=o(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.commandConfigPrefixingPlugin=void 0;var $a=_();function Ua(e){let t=$a.prefixedArray(e,"-c");return{type:"spawn.args",action(r){return[...t,...r]}}}_t.commandConfigPrefixingPlugin=Ua});var sn=o(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.errorDetectionPlugin=Se.errorDetectionHandler=void 0;var Wa=Q();function Ha(e){return!!(e.exitCode&&e.stdErr.length)}function Va(e){return Buffer.concat([...e.stdOut,...e.stdErr])}function za(e=!1,t=Ha,r=Va){return(s,n)=>!e&&s||!t(n)?s:r(n)}Se.errorDetectionHandler=za;function Ya(e){return{type:"task.error",action(t,r){let s=e(t.error,{stdErr:r.stdErr,stdOut:r.stdOut,exitCode:r.exitCode});return Buffer.isBuffer(s)?{error:new Wa.GitError(void 0,s.toString("utf-8"))}:{error:s}}}}Se.errorDetectionPlugin=Ya});var un=o(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.PluginStore=void 0;var nn=_(),on=class{constructor(){this.plugins=new Set}add(t){let r=[];return nn.asArray(t).forEach(s=>s&&this.plugins.add(nn.append(r,s))),()=>{r.forEach(s=>this.plugins.delete(s))}}exec(t,r,s){let n=r,i=Object.freeze(Object.create(s));for(let a of this.plugins)a.type===t&&(n=a.action(n,i));return n}};yt.PluginStore=on});var an=o(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.progressMonitorPlugin=void 0;var bt=_();function Ka(e){let t="--progress",r=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action(i,a){return r.includes(a.method)?bt.including(i,t):i}},{type:"spawn.after",action(i,a){var c;!a.commands.includes(t)||(c=a.spawned.stderr)===null||c===void 0||c.on("data",d=>{let g=/^([a-zA-Z ]+):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(d.toString("utf8"));!g||e({method:a.method,stage:Qa(g[1]),progress:bt.asNumber(g[2]),processed:bt.asNumber(g[3]),total:bt.asNumber(g[4])})})}}]}Tt.progressMonitorPlugin=Ka;function Qa(e){return String(e.toLowerCase().split(" ",1))||"unknown"}});var ln=o(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0})});var fn=o(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.spawnOptionsPlugin=void 0;var Xa=_();function Ja(e){let t=Xa.pick(e,["uid","gid"]);return{type:"spawn.options",action(r){return Object.assign(Object.assign({},t),r)}}}kt.spawnOptionsPlugin=Ja});var dn=o(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.timeoutPlugin=void 0;var Za=mr();function ec({block:e}){if(e>0)return{type:"spawn.after",action(t,r){var s,n;let i;function a(){i&&clearTimeout(i),i=setTimeout(d,e)}function c(){var g,u;(g=r.spawned.stdout)===null||g===void 0||g.off("data",a),(u=r.spawned.stderr)===null||u===void 0||u.off("data",a),r.spawned.off("exit",c),r.spawned.off("close",c)}function d(){c(),r.kill(new Za.GitPluginError(void 0,"timeout","block timeout reached"))}(s=r.spawned.stdout)===null||s===void 0||s.on("data",a),(n=r.spawned.stderr)===null||n===void 0||n.on("data",a),r.spawned.on("exit",c),r.spawned.on("close",c),a()}}}vt.timeoutPlugin=ec});var pn=o(F=>{"use strict";var tc=F&&F.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),ce=F&&F.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&tc(t,e,r)};Object.defineProperty(F,"__esModule",{value:!0});ce(rn(),F);ce(sn(),F);ce(un(),F);ce(an(),F);ce(ln(),F);ce(fn(),F);ce(dn(),F)});var Et=o(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.GitLogger=Pe.createLogger=void 0;var Ot=Tr(),Z=_();Ot.default.formatters.L=e=>String(Z.filterHasLength(e)?e.length:"-");Ot.default.formatters.B=e=>Buffer.isBuffer(e)?e.toString("utf8"):Z.objectToString(e);function gn(){return Ot.default("simple-git")}function Ct(e,t,r){return!t||!String(t).replace(/\s*/,"")?r?(s,...n)=>{e(s,...n),r(s,...n)}:e:(s,...n)=>{e(`%s ${s}`,t,...n),r&&r(s,...n)}}function rc(e,t,{namespace:r}){if(typeof e=="string")return e;let s=t&&t.namespace||"";return s.startsWith(r)?s.substr(r.length+1):s||r}function hn(e,t,r,s=gn()){let n=e&&`[${e}]`||"",i=[],a=typeof t=="string"?s.extend(t):t,c=rc(Z.filterType(t,Z.filterString),a,s);return g(r);function d(u,l){return Z.append(i,hn(e,c.replace(/^[^:]+/,u),l,s))}function g(u){let l=u&&`[${u}]`||"",b=a&&Ct(a,l)||Z.NOOP,j=Ct(s,`${n} ${l}`,b);return Object.assign(a?b:j,{label:e,sibling:d,info:j,step:g})}}Pe.createLogger=hn;var mn=class{constructor(t=gn()){this._out=t,this.error=Ct(t,"[ERROR]"),this.warn=Ct(t,"[WARN]")}silent(t=!1){if(t!==this._out.enabled)return;let{namespace:r}=this._out,s=(process.env.DEBUG||"").split(",").filter(a=>!!a),n=s.includes(r),i=s.includes(`-${r}`);t?n?Z.remove(s,r):s.push(`-${r}`):i?Z.remove(s,`-${r}`):s.push(r),Ot.default.enable(s.join(","))}};Pe.GitLogger=mn});var _n=o(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.TasksPendingQueue=void 0;var sc=Q(),nc=Et(),Re=class{constructor(t="GitExecutor"){this.logLabel=t,this._queue=new Map}withProgress(t){return this._queue.get(t)}createProgress(t){let r=Re.getName(t.commands[0]),s=nc.createLogger(this.logLabel,r);return{task:t,logger:s,name:r}}push(t){let r=this.createProgress(t);return r.logger("Adding task to the queue, commands = %o",t.commands),this._queue.set(t,r),r}fatal(t){for(let[r,{logger:s}]of Array.from(this._queue.entries()))r===t.task?(s.info("Failed %o",t),s("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted")):s.info("A fatal exception occurred in a previous task, the queue has been purged: %o",t.message),this.complete(r);if(this._queue.size!==0)throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(t){this.withProgress(t)&&this._queue.delete(t)}attempt(t){let r=this.withProgress(t);if(!r)throw new sc.GitError(void 0,"TasksPendingQueue: attempt called for an unknown task");return r.logger("Starting task"),r}static getName(t="empty"){return`task:${t}:${++Re.counter}`}};St.TasksPendingQueue=Re;Re.counter=0});var vn=o(Me=>{"use strict";var Pt=Me&&Me.__awaiter||function(e,t,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function c(u){try{g(s.next(u))}catch(l){a(l)}}function d(u){try{g(s.throw(u))}catch(l){a(l)}}function g(u){u.done?i(u.value):n(u.value).then(c,d)}g((s=s.apply(e,t||[])).next())})};Object.defineProperty(Me,"__esModule",{value:!0});Me.GitExecutorChain=void 0;var ic=require("child_process"),yn=Q(),bn=D(),we=_(),oc=_n(),Tn=class{constructor(t,r,s){this._executor=t,this._scheduler=r,this._plugins=s,this._chain=Promise.resolve(),this._queue=new oc.TasksPendingQueue}get binary(){return this._executor.binary}get cwd(){return this._cwd||this._executor.cwd}set cwd(t){this._cwd=t}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(t){return this._queue.push(t),this._chain=this._chain.then(()=>this.attemptTask(t))}attemptTask(t){return Pt(this,void 0,void 0,function*(){let r=yield this._scheduler.next(),s=()=>this._queue.complete(t);try{let{logger:n}=this._queue.attempt(t);return yield bn.isEmptyTask(t)?this.attemptEmptyTask(t,n):this.attemptRemoteTask(t,n)}catch(n){throw this.onFatalException(t,n)}finally{s(),r()}})}onFatalException(t,r){let s=r instanceof yn.GitError?Object.assign(r,{task:t}):new yn.GitError(t,r&&String(r));return this._chain=Promise.resolve(),this._queue.fatal(s),s}attemptRemoteTask(t,r){return Pt(this,void 0,void 0,function*(){let s=this._plugins.exec("spawn.args",[...t.commands],Rt(t,t.commands)),n=yield this.gitResponse(t,this.binary,s,this.outputHandler,r.step("SPAWN")),i=yield this.handleTaskData(t,s,n,r.step("HANDLE"));return r("passing response to task's parser as a %s",t.format),bn.isBufferTask(t)?we.callTaskParser(t.parser,i):we.callTaskParser(t.parser,i.asStrings())})}attemptEmptyTask(t,r){return Pt(this,void 0,void 0,function*(){return r("empty task bypassing child process to call to task's parser"),t.parser(this)})}handleTaskData(t,r,s,n){let{exitCode:i,rejection:a,stdOut:c,stdErr:d}=s;return new Promise((g,u)=>{n("Preparing to handle process response exitCode=%d stdOut=",i);let{error:l}=this._plugins.exec("task.error",{error:a},Object.assign(Object.assign({},Rt(t,r)),s));if(l&&t.onError)return n.info("exitCode=%s handling with custom error handler"),t.onError(s,l,b=>{n.info("custom error handler treated as success"),n("custom error returned a %s",we.objectToString(b)),g(new we.GitOutputStreams(Array.isArray(b)?Buffer.concat(b):b,Buffer.concat(d)))},u);if(l)return n.info("handling as error: exitCode=%s stdErr=%s rejection=%o",i,d.length,a),u(l);n.info("retrieving task output complete"),g(new we.GitOutputStreams(Buffer.concat(c),Buffer.concat(d)))})}gitResponse(t,r,s,n,i){return Pt(this,void 0,void 0,function*(){let a=i.sibling("output"),c=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},Rt(t,t.commands));return new Promise(d=>{let g=[],u=[],l=!1,b;function j(v,w="retry"){(l||u.length||g.length)&&(i.info("exitCode=%s event=%s rejection=%o",v,w,b),d({stdOut:g,stdErr:u,exitCode:v,rejection:b}),l=!0),l||(l=!0,setTimeout(()=>j(v,"deferred"),50),i("received %s event before content on stdOut/stdErr",w))}i.info("%s %o",r,s),i("%O",c);let R=ic.spawn(r,s,c);R.stdout.on("data",kn(g,"stdOut",i,a.step("stdOut"))),R.stderr.on("data",kn(u,"stdErr",i,a.step("stdErr"))),R.on("error",uc(u,i)),R.on("close",v=>j(v,"close")),R.on("exit",v=>j(v,"exit")),n&&(i("Passing child process stdOut/stdErr to custom outputHandler"),n(r,R.stdout,R.stderr,[...s])),this._plugins.exec("spawn.after",void 0,Object.assign(Object.assign({},Rt(t,s)),{spawned:R,kill(v){R.killed||(b=v,R.kill("SIGINT"))}}))})})}};Me.GitExecutorChain=Tn;function Rt(e,t){return{method:we.first(e.commands)||"",commands:t}}function uc(e,t){return r=>{t("[ERROR] child process exception %o",r),e.push(Buffer.from(String(r.stack),"ascii"))}}function kn(e,t,r,s){return n=>{r("%s received %L bytes",t,n),s("%B",n),e.push(n)}}});var En=o(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.GitExecutor=void 0;var On=vn(),Cn=class{constructor(t="git",r,s,n){this.binary=t,this.cwd=r,this._scheduler=s,this._plugins=n,this._chain=new On.GitExecutorChain(this,this._scheduler,this._plugins)}chain(){return new On.GitExecutorChain(this,this._scheduler,this._plugins)}push(t){return this._chain.push(t)}};wt.GitExecutor=Cn});var Pn=o(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.taskCallback=void 0;var ac=me(),Sn=_();function cc(e,t,r=Sn.NOOP){let s=i=>{r(null,i)},n=i=>{if((i==null?void 0:i.task)===e){if(i instanceof ac.GitResponseError)return r(lc(i));r(i)}};t.then(s,n)}Mt.taskCallback=cc;function lc(e){let t=s=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${s} should be GitResponseError.git.${s}, this will no longer be available in version 3`),t=Sn.NOOP};return Object.create(e,Object.getOwnPropertyNames(e.git).reduce(r,{}));function r(s,n){return n in e||(s[n]={enumerable:!1,configurable:!1,get(){return t(n),e.git[n]}}),s}}});var Rn=o(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.changeWorkingDirectoryTask=void 0;var fc=_(),dc=D();function pc(e,t){return dc.adhocExecTask(r=>{if(!fc.folderExists(e))throw new Error(`Git.cwd: cannot change to non-directory "${e}"`);return(t||r).cwd=e})}Dt.changeWorkingDirectoryTask=pc});var wn=o(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.hashObjectTask=void 0;var gc=D();function hc(e,t){let r=["hash-object",e];return t&&r.push("-w"),gc.straightThroughStringTask(r,!0)}jt.hashObjectTask=hc});var Mn=o(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.parseInit=De.InitSummary=void 0;var Ke=class{constructor(t,r,s,n){this.bare=t,this.path=r,this.existing=s,this.gitDir=n}};De.InitSummary=Ke;var mc=/^Init.+ repository in (.+)$/,_c=/^Rein.+ in (.+)$/;function yc(e,t,r){let s=String(r).trim(),n;if(n=mc.exec(s))return new Ke(e,t,!1,n[1]);if(n=_c.exec(s))return new Ke(e,t,!0,n[1]);let i="",a=s.split(" ");for(;a.length;)if(a.shift()==="in"){i=a.join(" ");break}return new Ke(e,t,/^re/i.test(s),i)}De.parseInit=yc});var jn=o(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.initTask=void 0;var bc=Mn(),Dn="--bare";function Tc(e){return e.includes(Dn)}function kc(e=!1,t,r){let s=["init",...r];return e&&!Tc(s)&&s.splice(1,0,Dn),{commands:s,format:"utf-8",parser(n){return bc.parseInit(s.includes("--bare"),t,n)}}}qt.initTask=kc});var Fn=o(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.MergeSummaryDetail=je.MergeSummaryConflict=void 0;var qn=class{constructor(t,r=null,s){this.reason=t,this.file=r,this.meta=s}toString(){return`${this.file}:${this.reason}`}};je.MergeSummaryConflict=qn;var An=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){return this.conflicts.length?`CONFLICTS: ${this.conflicts.join(", ")}`:"OK"}};je.MergeSummaryDetail=An});var In=o(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.PullSummary=void 0;var Ln=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}};At.PullSummary=Ln});var Bn=o(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.remoteMessagesObjectParsers=void 0;var ee=_();function Fr(e){return e.objects=e.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function Nn(e){let t=/^\s*(\d+)/.exec(e),r=/delta (\d+)/i.exec(e);return{count:ee.asNumber(t&&t[1]||"0"),delta:ee.asNumber(r&&r[1]||"0")}}Ft.remoteMessagesObjectParsers=[new ee.RemoteLineParser(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,(e,[t,r])=>{let s=t.toLowerCase(),n=Fr(e.remoteMessages);Object.assign(n,{[s]:ee.asNumber(r)})}),new ee.RemoteLineParser(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,(e,[t,r])=>{let s=t.toLowerCase(),n=Fr(e.remoteMessages);Object.assign(n,{[s]:ee.asNumber(r)})}),new ee.RemoteLineParser(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,(e,[t,r,s])=>{let n=Fr(e.remoteMessages);n.total=Nn(t),n.reused=Nn(r),n.packReused=ee.asNumber(s)})]});var Ir=o(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.RemoteMessageSummary=qe.parseRemoteMessages=void 0;var Qe=_(),vc=Bn(),Oc=[new Qe.RemoteLineParser(/^remote:\s*(.+)$/,(e,[t])=>(e.remoteMessages.all.push(t.trim()),!1)),...vc.remoteMessagesObjectParsers,new Qe.RemoteLineParser([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],(e,[t])=>{e.remoteMessages.pullRequestUrl=t}),new Qe.RemoteLineParser([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],(e,[t,r,s])=>{e.remoteMessages.vulnerabilities={count:Qe.asNumber(t),summary:r,url:s}})];function Cc(e,t){return Qe.parseStringResponse({remoteMessages:new Lr},Oc,t)}qe.parseRemoteMessages=Cc;var Lr=class{constructor(){this.all=[]}};qe.RemoteMessageSummary=Lr});var Nr=o(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.parsePullResult=le.parsePullDetail=void 0;var xn=In(),Ae=_(),Ec=Ir(),Sc=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,Pc=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,Rc=/^(create|delete) mode \d+ (.+)/,wc=[new Ae.LineParser(Sc,(e,[t,r,s])=>{e.files.push(t),r&&(e.insertions[t]=r.length),s&&(e.deletions[t]=s.length)}),new Ae.LineParser(Pc,(e,[t,,r,,s])=>r!==void 0||s!==void 0?(e.summary.changes=+t||0,e.summary.insertions=+r||0,e.summary.deletions=+s||0,!0):!1),new Ae.LineParser(Rc,(e,[t,r])=>{Ae.append(e.files,r),Ae.append(t==="create"?e.created:e.deleted,r)})],Mc=(e,t)=>Ae.parseStringResponse(new xn.PullSummary,wc,e,t);le.parsePullDetail=Mc;var Dc=(e,t)=>Object.assign(new xn.PullSummary,le.parsePullDetail(e,t),Ec.parseRemoteMessages(e,t));le.parsePullResult=Dc});var Gn=o(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.parseMergeDetail=fe.parseMergeResult=void 0;var Lt=Fn(),Fe=_(),jc=Nr(),qc=[new Fe.LineParser(/^Auto-merging\s+(.+)$/,(e,[t])=>{e.merges.push(t)}),new Fe.LineParser(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,(e,[t,r])=>{e.conflicts.push(new Lt.MergeSummaryConflict(t,r))}),new Fe.LineParser(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,(e,[t,r,s])=>{e.conflicts.push(new Lt.MergeSummaryConflict(t,r,{deleteRef:s}))}),new Fe.LineParser(/^CONFLICT\s+\((.+)\):/,(e,[t])=>{e.conflicts.push(new Lt.MergeSummaryConflict(t,null))}),new Fe.LineParser(/^Automatic merge failed;\s+(.+)$/,(e,[t])=>{e.result=t})],Ac=(e,t)=>Object.assign(fe.parseMergeDetail(e,t),jc.parsePullResult(e,t));fe.parseMergeResult=Ac;var Fc=e=>Fe.parseStringResponse(new Lt.MergeSummaryDetail,qc,e);fe.parseMergeDetail=Fc});var $n=o(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.mergeTask=void 0;var Lc=me(),Ic=Gn(),Nc=D();function Bc(e){return e.length?{commands:["merge",...e],format:"utf-8",parser(t,r){let s=Ic.parseMergeResult(t,r);if(s.failed)throw new Lc.GitResponseError(s);return s}}:Nc.configurationErrorTask("Git.merge requires at least one option")}It.mergeTask=Bc});var Un=o(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.parsePushDetail=de.parsePushResult=void 0;var Le=_(),xc=Ir();function Gc(e,t,r){let s=r.includes("deleted"),n=r.includes("tag")||/^refs\/tags/.test(e),i=!r.includes("new");return{deleted:s,tag:n,branch:!n,new:!i,alreadyUpdated:i,local:e,remote:t}}var $c=[new Le.LineParser(/^Pushing to (.+)$/,(e,[t])=>{e.repo=t}),new Le.LineParser(/^updating local tracking ref '(.+)'/,(e,[t])=>{e.ref=Object.assign(Object.assign({},e.ref||{}),{local:t})}),new Le.LineParser(/^[*-=]\s+([^:]+):(\S+)\s+\[(.+)]$/,(e,[t,r,s])=>{e.pushed.push(Gc(t,r,s))}),new Le.LineParser(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,(e,[t,r,s])=>{e.branch=Object.assign(Object.assign({},e.branch||{}),{local:t,remote:r,remoteName:s})}),new Le.LineParser(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,(e,[t,r,s,n])=>{e.update={head:{local:t,remote:r},hash:{from:s,to:n}}})],Uc=(e,t)=>{let r=de.parsePushDetail(e,t),s=xc.parseRemoteMessages(e,t);return Object.assign(Object.assign({},r),s)};de.parsePushResult=Uc;var Wc=(e,t)=>Le.parseStringResponse({pushed:[]},$c,e,t);de.parsePushDetail=Wc});var Br=o(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.pushTask=Ie.pushTagsTask=void 0;var Hc=Un(),Nt=_();function Vc(e={},t){return Nt.append(t,"--tags"),Wn(e,t)}Ie.pushTagsTask=Vc;function Wn(e={},t){let r=["push",...t];return e.branch&&r.splice(1,0,e.branch),e.remote&&r.splice(1,0,e.remote),Nt.remove(r,"-v"),Nt.append(r,"--verbose"),Nt.append(r,"--porcelain"),{commands:r,format:"utf-8",parser:Hc.parsePushResult}}Ie.pushTask=Wn});var Vn=o(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.FileStatusSummary=pe.fromPathRegex=void 0;pe.fromPathRegex=/^(.+) -> (.+)$/;var Hn=class{constructor(t,r,s){if(this.path=t,this.index=r,this.working_dir=s,r+s==="R"){let n=pe.fromPathRegex.exec(t)||[null,t,t];this.from=n[1]||"",this.path=n[2]||""}}};pe.FileStatusSummary=Hn});var Yn=o(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.parseStatusSummary=Ne.StatusSummary=void 0;var E=_(),zc=Vn(),xr=class{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null}isClean(){return!this.files.length}};Ne.StatusSummary=xr;var y;(function(e){e.ADDED="A",e.DELETED="D",e.MODIFIED="M",e.RENAMED="R",e.COPIED="C",e.UNMERGED="U",e.UNTRACKED="?",e.IGNORED="!",e.NONE=" "})(y||(y={}));function zn(e){let t=/^(.+) -> (.+)$/.exec(e);return t?{from:String(t[1]),to:String(t[2])}:{from:e,to:e}}function N(e,t,r){return[`${e}${t}`,r]}function Gr(e,...t){return t.map(r=>N(e,r,(s,n)=>E.append(s.conflicted,n)))}var Yc=new Map([N(y.NONE,y.ADDED,(e,t)=>E.append(e.created,t)),N(y.NONE,y.DELETED,(e,t)=>E.append(e.deleted,t)),N(y.NONE,y.MODIFIED,(e,t)=>E.append(e.modified,t)),N(y.ADDED,y.NONE,(e,t)=>E.append(e.created,t)&&E.append(e.staged,t)),N(y.ADDED,y.MODIFIED,(e,t)=>E.append(e.created,t)&&E.append(e.staged,t)&&E.append(e.modified,t)),N(y.DELETED,y.NONE,(e,t)=>E.append(e.deleted,t)&&E.append(e.staged,t)),N(y.MODIFIED,y.NONE,(e,t)=>E.append(e.modified,t)&&E.append(e.staged,t)),N(y.MODIFIED,y.MODIFIED,(e,t)=>E.append(e.modified,t)&&E.append(e.staged,t)),N(y.RENAMED,y.NONE,(e,t)=>{E.append(e.renamed,zn(t))}),N(y.RENAMED,y.MODIFIED,(e,t)=>{let r=zn(t);E.append(e.renamed,r),E.append(e.modified,r.to)}),N(y.UNTRACKED,y.UNTRACKED,(e,t)=>E.append(e.not_added,t)),...Gr(y.ADDED,y.ADDED,y.UNMERGED),...Gr(y.DELETED,y.DELETED,y.UNMERGED),...Gr(y.UNMERGED,y.ADDED,y.DELETED,y.UNMERGED),["##",(e,t)=>{let r=/ahead (\d+)/,s=/behind (\d+)/,n=/^(.+?(?=(?:\.{3}|\s|$)))/,i=/\.{3}(\S*)/,a=/\son\s([\S]+)$/,c;c=r.exec(t),e.ahead=c&&+c[1]||0,c=s.exec(t),e.behind=c&&+c[1]||0,c=n.exec(t),e.current=c&&c[1],c=i.exec(t),e.tracking=c&&c[1],c=a.exec(t),e.current=c&&c[1]||e.current}]]),Kc=function(e){let t=e.trim().split(`
`),r=new xr;for(let s=0,n=t.length;s<n;s++)Qc(r,t[s]);return r};Ne.parseStatusSummary=Kc;function Qc(e,t){let r=t.trim();switch(" "){case r.charAt(2):return s(r.charAt(0),r.charAt(1),r.substr(3));case r.charAt(1):return s(y.NONE,r.charAt(0),r.substr(2));default:return}function s(n,i,a){let c=`${n}${i}`,d=Yc.get(c);d&&d(e,a),c!=="##"&&e.files.push(new zc.FileStatusSummary(a,n,i))}}});var Kn=o(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.statusTask=void 0;var Xc=Yn();function Jc(e){return{format:"utf-8",commands:["status","--porcelain","-b","-u",...e],parser(t){return Xc.parseStatusSummary(t)}}}Bt.statusTask=Jc});var Jn=o(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.SimpleGitApi=void 0;var Zc=Pn(),Qn=Rn(),el=Dr(),tl=wn(),rl=jn(),Xn=$n(),sl=Br(),nl=Kn(),xt=D(),O=_(),$r=class{constructor(t){this._executor=t}_runTask(t,r){let s=this._executor.chain(),n=s.push(t);return r&&Zc.taskCallback(t,n,r),Object.create(this,{then:{value:n.then.bind(n)},catch:{value:n.catch.bind(n)},_executor:{value:s}})}add(t){return this._runTask(xt.straightThroughStringTask(["add",...O.asArray(t)]),O.trailingFunctionArgument(arguments))}cwd(t){let r=O.trailingFunctionArgument(arguments);return typeof t=="string"?this._runTask(Qn.changeWorkingDirectoryTask(t,this._executor),r):typeof(t==null?void 0:t.path)=="string"?this._runTask(Qn.changeWorkingDirectoryTask(t.path,t.root&&this._executor||void 0),r):this._runTask(xt.configurationErrorTask("Git.cwd: workingDirectory must be supplied as a string"),r)}hashObject(t,r){return this._runTask(tl.hashObjectTask(t,r===!0),O.trailingFunctionArgument(arguments))}init(t){return this._runTask(rl.initTask(t===!0,this._executor.cwd,O.getTrailingOptions(arguments)),O.trailingFunctionArgument(arguments))}merge(){return this._runTask(Xn.mergeTask(O.getTrailingOptions(arguments)),O.trailingFunctionArgument(arguments))}mergeFromTo(t,r){return O.filterString(t)&&O.filterString(r)?this._runTask(Xn.mergeTask([t,r,...O.getTrailingOptions(arguments)]),O.trailingFunctionArgument(arguments,!1)):this._runTask(xt.configurationErrorTask("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"))}outputHandler(t){return this._executor.outputHandler=t,this}push(){let t=sl.pushTask({remote:O.filterType(arguments[0],O.filterString),branch:O.filterType(arguments[1],O.filterString)},O.getTrailingOptions(arguments));return this._runTask(t,O.trailingFunctionArgument(arguments))}stash(){return this._runTask(xt.straightThroughStringTask(["stash",...O.getTrailingOptions(arguments)]),O.trailingFunctionArgument(arguments))}status(){return this._runTask(nl.statusTask(O.getTrailingOptions(arguments)),O.trailingFunctionArgument(arguments))}};Gt.SimpleGitApi=$r;Object.assign($r.prototype,el.default())});var Zn=o(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.createDeferred=ge.deferred=void 0;function Ur(){let e,t,r="pending";return{promise:new Promise((n,i)=>{e=n,t=i}),done(n){r==="pending"&&(r="resolved",e(n))},fail(n){r==="pending"&&(r="rejected",t(n))},get fulfilled(){return r!=="pending"},get status(){return r}}}ge.deferred=Ur;ge.createDeferred=Ur;ge.default=Ur});var ti=o($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.Scheduler=void 0;var Wr=_(),il=Zn(),ol=Et(),ul=(()=>{let e=0;return()=>{e++;let{promise:t,done:r}=il.createDeferred();return{promise:t,done:r,id:e}}})(),ei=class{constructor(t=2){this.concurrency=t,this.logger=ol.createLogger("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",t)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);return}let t=Wr.append(this.running,this.pending.shift());this.logger("Attempting id=%s",t.id),t.done(()=>{this.logger("Completing id=",t.id),Wr.remove(this.running,t),this.schedule()})}next(){let{promise:t,id:r}=Wr.append(this.pending,ul());return this.logger("Scheduling id=%s",r),this.schedule(),t}};$t.Scheduler=ei});var ri=o(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.applyPatchTask=void 0;var al=D();function cl(e,t){return al.straightThroughStringTask(["apply",...t,...e])}Ut.applyPatchTask=cl});var ni=o(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.isSingleBranchDeleteFailure=z.branchDeletionFailure=z.branchDeletionSuccess=z.BranchDeletionBatch=void 0;var si=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}};z.BranchDeletionBatch=si;function ll(e,t){return{branch:e,hash:t,success:!0}}z.branchDeletionSuccess=ll;function fl(e){return{branch:e,hash:null,success:!1}}z.branchDeletionFailure=fl;function dl(e){return e.success}z.isSingleBranchDeleteFailure=dl});var oi=o(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.hasBranchDeletionError=Be.parseBranchDeletions=void 0;var Hr=ni(),Wt=_(),pl=/(\S+)\s+\(\S+\s([^)]+)\)/,ii=/^error[^']+'([^']+)'/m,gl=[new Wt.LineParser(pl,(e,[t,r])=>{let s=Hr.branchDeletionSuccess(t,r);e.all.push(s),e.branches[t]=s}),new Wt.LineParser(ii,(e,[t])=>{let r=Hr.branchDeletionFailure(t);e.errors.push(r),e.all.push(r),e.branches[t]=r})],hl=(e,t)=>Wt.parseStringResponse(new Hr.BranchDeletionBatch,gl,e,t);Be.parseBranchDeletions=hl;function ml(e,t){return t===Wt.ExitCodes.ERROR&&ii.test(e)}Be.hasBranchDeletionError=ml});var ai=o(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.BranchSummaryResult=void 0;var ui=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(t,r,s,n,i){t&&(this.detached=r,this.current=s),this.all.push(s),this.branches[s]={current:t,name:s,commit:n,label:i}}};Ht.BranchSummaryResult=ui});var ci=o(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.parseBranchSummary=void 0;var _l=ai(),Vr=_(),yl=[new Vr.LineParser(/^(\*\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,(e,[t,r,s,n])=>{e.push(!!t,!0,r,s,n)}),new Vr.LineParser(/^(\*\s)?(\S+)\s+([a-z0-9]+)\s(.*)$/s,(e,[t,r,s,n])=>{e.push(!!t,!1,r,s,n)})];function bl(e){return Vr.parseStringResponse(new _l.BranchSummaryResult,yl,e)}Vt.parseBranchSummary=bl});var pi=o(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.deleteBranchTask=B.deleteBranchesTask=B.branchLocalTask=B.branchTask=B.containsDeleteBranchCommand=void 0;var Tl=me(),Xe=oi(),li=ci(),fi=_();function di(e){let t=["-d","-D","--delete"];return e.some(r=>t.includes(r))}B.containsDeleteBranchCommand=di;function kl(e){let t=di(e),r=["branch",...e];return r.length===1&&r.push("-a"),r.includes("-v")||r.splice(1,0,"-v"),{format:"utf-8",commands:r,parser(s,n){return t?Xe.parseBranchDeletions(s,n).all[0]:li.parseBranchSummary(s)}}}B.branchTask=kl;function vl(){let e=li.parseBranchSummary;return{format:"utf-8",commands:["branch","-v"],parser:e}}B.branchLocalTask=vl;function Ol(e,t=!1){return{format:"utf-8",commands:["branch","-v",t?"-D":"-d",...e],parser(r,s){return Xe.parseBranchDeletions(r,s)},onError({exitCode:r,stdOut:s},n,i,a){if(!Xe.hasBranchDeletionError(String(n),r))return a(n);i(s)}}}B.deleteBranchesTask=Ol;function Cl(e,t=!1){let r={format:"utf-8",commands:["branch","-v",t?"-D":"-d",e],parser(s,n){return Xe.parseBranchDeletions(s,n).branches[e]},onError({exitCode:s,stdErr:n,stdOut:i},a,c,d){if(!Xe.hasBranchDeletionError(String(a),s))return d(a);throw new Tl.GitResponseError(r.parser(fi.bufferToString(i),fi.bufferToString(n)),String(a))}};return r}B.deleteBranchTask=Cl});var gi=o(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.parseCheckIgnore=void 0;var El=e=>e.split(/\n/g).map(t=>t.trim()).filter(t=>!!t);zt.parseCheckIgnore=El});var hi=o(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.checkIgnoreTask=void 0;var Sl=gi();function Pl(e){return{commands:["check-ignore",...e],format:"utf-8",parser:Sl.parseCheckIgnore}}Yt.checkIgnoreTask=Pl});var _i=o(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.cloneMirrorTask=xe.cloneTask=void 0;var Rl=D(),wl=_();function mi(e,t,r){let s=["clone",...r];return typeof e=="string"&&s.push(e),typeof t=="string"&&s.push(t),Rl.straightThroughStringTask(s)}xe.cloneTask=mi;function Ml(e,t,r){return wl.append(r,"--mirror"),mi(e,t,r)}xe.cloneMirrorTask=Ml});var yi=o(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.parseCommitResult=void 0;var Je=_(),Dl=[new Je.LineParser(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,(e,[t,r,s])=>{e.branch=t,e.commit=s,e.root=!!r}),new Je.LineParser(/\s*Author:\s(.+)/i,(e,[t])=>{let r=t.split("<"),s=r.pop();!s||!s.includes("@")||(e.author={email:s.substr(0,s.length-1),name:r.join("<").trim()})}),new Je.LineParser(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,(e,[t,r,s])=>{e.summary.changes=parseInt(t,10)||0,e.summary.insertions=parseInt(r,10)||0,e.summary.deletions=parseInt(s,10)||0}),new Je.LineParser(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,(e,[t,r,s])=>{e.summary.changes=parseInt(t,10)||0;let n=parseInt(r,10)||0;s==="-"?e.summary.deletions=n:s==="+"&&(e.summary.insertions=n)})];function jl(e){let t={author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}};return Je.parseStringResponse(t,Dl,e)}Kt.parseCommitResult=jl});var bi=o(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.commitTask=void 0;var ql=yi();function Al(e,t,r){let s=["commit"];return e.forEach(n=>s.push("-m",n)),s.push(...t,...r),{commands:s,format:"utf-8",parser:ql.parseCommitResult}}Qt.commitTask=Al});var ki=o(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.DiffSummary=void 0;var Ti=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}};Xt.DiffSummary=Ti});var zr=o(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.parseDiffResult=void 0;var Fl=ki();function Ll(e){let t=e.trim().split(`
`),r=new Fl.DiffSummary;Il(r,t.pop());for(let s=0,n=t.length;s<n;s++){let i=t[s];Bl(i,r)||xl(i,r)}return r}Jt.parseDiffResult=Ll;function Il(e,t){(t||"").trim().split(", ").forEach(function(r){let s=/(\d+)\s([a-z]+)/.exec(r);!s||Nl(e,s[2],parseInt(s[1],10))})}function Nl(e,t,r){let s=/([a-z]+?)s?\b/.exec(t);!s||!vi[s[1]]||vi[s[1]](e,r)}var vi={file(e,t){e.changed=t},deletion(e,t){e.deletions=t},insertion(e,t){e.insertions=t}};function Bl(e,{files:t}){let r=e.trim().match(/^(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/);if(r){var s=(r[3]||"").trim();return t.push({file:r[1].trim(),changes:parseInt(r[2],10),insertions:s.replace(/-/g,"").length,deletions:s.replace(/\+/g,"").length,binary:!1}),!0}return!1}function xl(e,{files:t}){let r=e.match(/^(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)$/);return r?(t.push({file:r[1].trim(),before:+r[2],after:+r[3],binary:!0}),!0):!1}});var Oi=o(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.diffSummaryTask=void 0;var Gl=zr();function $l(e){return{commands:["diff","--stat=4096",...e],format:"utf-8",parser(t){return Gl.parseDiffResult(t)}}}Zt.diffSummaryTask=$l});var Ci=o(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.parseFetchResult=void 0;var er=_(),Ul=[new er.LineParser(/From (.+)$/,(e,[t])=>{e.remote=t}),new er.LineParser(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,(e,[t,r])=>{e.branches.push({name:t,tracking:r})}),new er.LineParser(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,(e,[t,r])=>{e.tags.push({name:t,tracking:r})})];function Wl(e,t){let r={raw:e,remote:null,branches:[],tags:[]};return er.parseStringResponse(r,Ul,e,t)}tr.parseFetchResult=Wl});var Ei=o(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.fetchTask=void 0;var Hl=Ci();function Vl(e,t,r){let s=["fetch",...r];return e&&t&&s.push(e,t),{commands:s,format:"utf-8",parser:Hl.parseFetchResult}}rr.fetchTask=Vl});var Yr=o(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.createListLogSummaryParser=L.SPLITTER=L.COMMIT_BOUNDARY=L.START_BOUNDARY=void 0;var zl=_(),Yl=zr();L.START_BOUNDARY="\xF2\xF2\xF2\xF2\xF2\xF2 ";L.COMMIT_BOUNDARY=" \xF2\xF2";L.SPLITTER=" \xF2 ";var Kl=["hash","date","message","refs","author_name","author_email"];function Ql(e,t){return t.reduce((r,s,n)=>(r[s]=e[n]||"",r),Object.create({diff:null}))}function Xl(e=L.SPLITTER,t=Kl){return function(r){let s=zl.toLinesWithContent(r,!0,L.START_BOUNDARY).map(function(n){let i=n.trim().split(L.COMMIT_BOUNDARY),a=Ql(i[0].trim().split(e),t);return i.length>1&&!!i[1].trim()&&(a.diff=Yl.parseDiffResult(i[1])),a});return{all:s,latest:s.length&&s[0]||null,total:s.length}}}L.createListLogSummaryParser=Xl});var Qr=o(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.logTask=Ge.parseLogOptions=void 0;var sr=Yr(),Jl=_(),Kr;(function(e){e[e["--pretty"]=0]="--pretty",e[e["max-count"]=1]="max-count",e[e.maxCount=2]="maxCount",e[e.n=3]="n",e[e.file=4]="file",e[e.format=5]="format",e[e.from=6]="from",e[e.to=7]="to",e[e.splitter=8]="splitter",e[e.symmetric=9]="symmetric",e[e.multiLine=10]="multiLine",e[e.strictDate=11]="strictDate"})(Kr||(Kr={}));function Zl(e,t){let r=[],s=[];return Object.keys(e).forEach(n=>{r.push(n),s.push(String(e[n]))}),[r,s.join(t)]}function ef(e){let t=Object.assign({},e);return Object.keys(e).forEach(r=>{r in Kr&&delete t[r]}),t}function tf(e={},t=[]){let r=e.splitter||sr.SPLITTER,s=e.format||{hash:"%H",date:e.strictDate===!1?"%ai":"%aI",message:"%s",refs:"%D",body:e.multiLine?"%B":"%b",author_name:"%aN",author_email:"%ae"},[n,i]=Zl(s,r),a=[],c=[`--pretty=format:${sr.START_BOUNDARY}${i}${sr.COMMIT_BOUNDARY}`,...t],d=e.n||e["max-count"]||e.maxCount;if(d&&c.push(`--max-count=${d}`),e.from&&e.to){let g=e.symmetric!==!1?"...":"..";a.push(`${e.from}${g}${e.to}`)}return e.file&&a.push("--follow",e.file),Jl.appendTaskOptions(ef(e),c),{fields:n,splitter:r,commands:[...c,...a]}}Ge.parseLogOptions=tf;function rf(e,t,r){return{commands:["log",...r],format:"utf-8",parser:sr.createListLogSummaryParser(e,t)}}Ge.logTask=rf});var Pi=o(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.parseMoveResult=void 0;var Si=_(),sf=[new Si.LineParser(/^Renaming (.+) to (.+)$/,(e,[t,r])=>{e.moves.push({from:t,to:r})})];function nf(e){return Si.parseStringResponse({moves:[]},sf,e)}nr.parseMoveResult=nf});var Ri=o(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.moveTask=void 0;var of=Pi(),uf=_();function af(e,t){return{commands:["mv","-v",...uf.asArray(e),t],format:"utf-8",parser:of.parseMoveResult}}ir.moveTask=af});var wi=o(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.pullTask=void 0;var cf=Nr();function lf(e,t,r){let s=["pull",...r];return e&&t&&s.splice(1,0,e,t),{commands:s,format:"utf-8",parser(n,i){return cf.parsePullResult(n,i)}}}or.pullTask=lf});var Di=o($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.parseGetRemotesVerbose=$e.parseGetRemotes=void 0;var ff=_();function df(e){let t={};return Mi(e,([r])=>t[r]={name:r}),Object.values(t)}$e.parseGetRemotes=df;function pf(e){let t={};return Mi(e,([r,s,n])=>{t.hasOwnProperty(r)||(t[r]={name:r,refs:{fetch:"",push:""}}),n&&s&&(t[r].refs[n.replace(/[^a-z]/g,"")]=s)}),Object.values(t)}$e.parseGetRemotesVerbose=pf;function Mi(e,t){ff.forEachLineWithContent(e,r=>t(r.split(/\s+/)))}});var qi=o(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.removeRemoteTask=x.remoteTask=x.listRemotesTask=x.getRemotesTask=x.addRemoteTask=void 0;var ji=Di(),ur=D();function gf(e,t,r=[]){return ur.straightThroughStringTask(["remote","add",...r,e,t])}x.addRemoteTask=gf;function hf(e){let t=["remote"];return e&&t.push("-v"),{commands:t,format:"utf-8",parser:e?ji.parseGetRemotesVerbose:ji.parseGetRemotes}}x.getRemotesTask=hf;function mf(e=[]){let t=[...e];return t[0]!=="ls-remote"&&t.unshift("ls-remote"),ur.straightThroughStringTask(t)}x.listRemotesTask=mf;function _f(e=[]){let t=[...e];return t[0]!=="remote"&&t.unshift("remote"),ur.straightThroughStringTask(t)}x.remoteTask=_f;function yf(e){return ur.straightThroughStringTask(["remote","remove",e])}x.removeRemoteTask=yf});var Ai=o(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.stashListTask=void 0;var bf=Yr(),Tf=Qr();function kf(e={},t){let r=Tf.parseLogOptions(e),s=bf.createListLogSummaryParser(r.splitter,r.fields);return{commands:["stash","list",...r.commands,...t],format:"utf-8",parser:s}}ar.stashListTask=kf});var Fi=o(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.updateSubModuleTask=Y.subModuleTask=Y.initSubModuleTask=Y.addSubModuleTask=void 0;var vf=D();function Of(e,t){return cr(["add",e,t])}Y.addSubModuleTask=Of;function Cf(e){return cr(["init",...e])}Y.initSubModuleTask=Cf;function cr(e){let t=[...e];return t[0]!=="submodule"&&t.unshift("submodule"),vf.straightThroughStringTask(t)}Y.subModuleTask=cr;function Ef(e){return cr(["update",...e])}Y.updateSubModuleTask=Ef});var Ii=o(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.parseTagList=Ue.TagList=void 0;var Xr=class{constructor(t,r){this.all=t,this.latest=r}};Ue.TagList=Xr;var Sf=function(e,t=!1){let r=e.split(`
`).map(Rf).filter(Boolean);t||r.sort(function(n,i){let a=n.split("."),c=i.split(".");if(a.length===1||c.length===1)return Pf(lr(a[0]),lr(c[0]));for(let d=0,g=Math.max(a.length,c.length);d<g;d++){let u=Li(lr(a[d]),lr(c[d]));if(u)return u}return 0});let s=t?r[0]:[...r].reverse().find(n=>n.indexOf(".")>=0);return new Xr(r,s)};Ue.parseTagList=Sf;function Pf(e,t){let r=isNaN(e),s=isNaN(t);return r!==s?r?1:-1:r?Li(e,t):0}function Li(e,t){return e===t?0:e>t?1:-1}function Rf(e){return e.trim()}function lr(e){return typeof e=="string"&&parseInt(e.replace(/^\D+/g,""),10)||0}});var Ni=o(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.addAnnotatedTagTask=te.addTagTask=te.tagListTask=void 0;var wf=Ii();function Mf(e=[]){let t=e.some(r=>/^--sort=/.test(r));return{format:"utf-8",commands:["tag","-l",...e],parser(r){return wf.parseTagList(r,t)}}}te.tagListTask=Mf;function Df(e){return{format:"utf-8",commands:["tag",e],parser(){return{name:e}}}}te.addTagTask=Df;function jf(e,t){return{format:"utf-8",commands:["tag","-a","-m",t,e],parser(){return{name:e}}}}te.addAnnotatedTagTask=jf});var $i=o((mg,Gi)=>{var{GitExecutor:qf}=En(),{SimpleGitApi:Af}=Jn(),{Scheduler:Ff}=ti(),{GitLogger:Lf}=Et(),{configurationErrorTask:he}=D(),{asArray:We,filterArray:Jr,filterPrimitives:If,filterString:K,filterStringOrStringArray:fr,filterType:W,getTrailingOptions:T,trailingFunctionArgument:h,trailingOptionsArgument:Bi}=_(),{applyPatchTask:Nf}=ri(),{branchTask:Bf,branchLocalTask:xf,deleteBranchesTask:Gf,deleteBranchTask:$f}=pi(),{checkIgnoreTask:Uf}=hi(),{checkIsRepoTask:Wf}=Er(),{cloneTask:Hf,cloneMirrorTask:Vf}=_i(),{cleanWithOptionsTask:zf,isCleanOptionsArray:Yf}=Rr(),{commitTask:Kf}=bi(),{diffSummaryTask:Qf}=Oi(),{fetchTask:Xf}=Ei(),{logTask:Jf,parseLogOptions:Zf}=Qr(),{moveTask:ed}=Ri(),{pullTask:td}=wi(),{pushTagsTask:rd}=Br(),{addRemoteTask:sd,getRemotesTask:nd,listRemotesTask:id,remoteTask:od,removeRemoteTask:ud}=qi(),{getResetMode:ad,resetTask:cd}=qr(),{stashListTask:ld}=Ai(),{addSubModuleTask:fd,initSubModuleTask:dd,subModuleTask:pd,updateSubModuleTask:gd}=Fi(),{addAnnotatedTagTask:hd,addTagTask:md,tagListTask:_d}=Ni(),{straightThroughBufferTask:yd,straightThroughStringTask:G}=D();function f(e,t){this._executor=new qf(e.binary,e.baseDir,new Ff(e.maxConcurrentProcesses),t),this._logger=new Lf}(f.prototype=Object.create(Af.prototype)).constructor=f;f.prototype._logger=null;f.prototype.customBinary=function(e){return this._executor.binary=e,this};f.prototype.env=function(e,t){return arguments.length===1&&typeof e=="object"?this._executor.env=e:(this._executor.env=this._executor.env||{})[e]=t,this};f.prototype.stashList=function(e){return this._runTask(ld(Bi(arguments)||{},Jr(e)&&e||[]),h(arguments))};function xi(e,t,r,s){return typeof r!="string"?he(`git.${e}() requires a string 'repoPath'`):t(r,W(s,K),T(arguments))}f.prototype.clone=function(){return this._runTask(xi("clone",Hf,...arguments),h(arguments))};f.prototype.mirror=function(){return this._runTask(xi("mirror",Vf,...arguments),h(arguments))};f.prototype.mv=function(e,t){return this._runTask(ed(e,t),h(arguments))};f.prototype.checkoutLatestTag=function(e){var t=this;return this.pull(function(){t.tags(function(r,s){t.checkout(s.latest,e)})})};f.prototype.commit=function(e,t,r,s){let n=h(arguments),i=[];return fr(e)?i.push(...We(e)):console.warn("simple-git deprecation notice: git.commit: requires the commit message to be supplied as a string/string[], this will be an error in version 3"),this._runTask(Kf(i,We(W(t,fr,[])),[...W(r,Jr,[]),...T(arguments,0,!0)]),n)};f.prototype.pull=function(e,t,r,s){return this._runTask(td(W(e,K),W(t,K),T(arguments)),h(arguments))};f.prototype.fetch=function(e,t){return this._runTask(Xf(W(e,K),W(t,K),T(arguments)),h(arguments))};f.prototype.silent=function(e){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this._logger.silent(!!e),this};f.prototype.tags=function(e,t){return this._runTask(_d(T(arguments)),h(arguments))};f.prototype.rebase=function(){return this._runTask(G(["rebase",...T(arguments)]),h(arguments))};f.prototype.reset=function(e){return this._runTask(cd(ad(e),T(arguments)),h(arguments))};f.prototype.revert=function(e){let t=h(arguments);return typeof e!="string"?this._runTask(he("Commit must be a string"),t):this._runTask(G(["revert",...T(arguments,0,!0),e]),t)};f.prototype.addTag=function(e){let t=typeof e=="string"?md(e):he("Git.addTag requires a tag name");return this._runTask(t,h(arguments))};f.prototype.addAnnotatedTag=function(e,t){return this._runTask(hd(e,t),h(arguments))};f.prototype.checkout=function(){let e=["checkout",...T(arguments,!0)];return this._runTask(G(e),h(arguments))};f.prototype.checkoutBranch=function(e,t,r){return this.checkout(["-b",e,t],h(arguments))};f.prototype.checkoutLocalBranch=function(e,t){return this.checkout(["-b",e],h(arguments))};f.prototype.deleteLocalBranch=function(e,t,r){return this._runTask($f(e,typeof t=="boolean"?t:!1),h(arguments))};f.prototype.deleteLocalBranches=function(e,t,r){return this._runTask(Gf(e,typeof t=="boolean"?t:!1),h(arguments))};f.prototype.branch=function(e,t){return this._runTask(Bf(T(arguments)),h(arguments))};f.prototype.branchLocal=function(e){return this._runTask(xf(),h(arguments))};f.prototype.raw=function(e){let t=!Array.isArray(e),r=[].slice.call(t?arguments:e,0);for(let n=0;n<r.length&&t;n++)if(!If(r[n])){r.splice(n,r.length-n);break}r.push(...T(arguments,0,!0));var s=h(arguments);return r.length?this._runTask(G(r),s):this._runTask(he("Raw: must supply one or more command to execute"),s)};f.prototype.submoduleAdd=function(e,t,r){return this._runTask(fd(e,t),h(arguments))};f.prototype.submoduleUpdate=function(e,t){return this._runTask(gd(T(arguments,!0)),h(arguments))};f.prototype.submoduleInit=function(e,t){return this._runTask(dd(T(arguments,!0)),h(arguments))};f.prototype.subModule=function(e,t){return this._runTask(pd(T(arguments)),h(arguments))};f.prototype.listRemote=function(){return this._runTask(id(T(arguments)),h(arguments))};f.prototype.addRemote=function(e,t,r){return this._runTask(sd(e,t,T(arguments)),h(arguments))};f.prototype.removeRemote=function(e,t){return this._runTask(ud(e),h(arguments))};f.prototype.getRemotes=function(e,t){return this._runTask(nd(e===!0),h(arguments))};f.prototype.remote=function(e,t){return this._runTask(od(T(arguments)),h(arguments))};f.prototype.tag=function(e,t){let r=T(arguments);return r[0]!=="tag"&&r.unshift("tag"),this._runTask(G(r),h(arguments))};f.prototype.updateServerInfo=function(e){return this._runTask(G(["update-server-info"]),h(arguments))};f.prototype.pushTags=function(e,t){let r=rd({remote:W(e,K)},T(arguments));return this._runTask(r,h(arguments))};f.prototype.rm=function(e){return this._runTask(G(["rm","-f",...We(e)]),h(arguments))};f.prototype.rmKeepLocal=function(e){return this._runTask(G(["rm","--cached",...We(e)]),h(arguments))};f.prototype.catFile=function(e,t){return this._catFile("utf-8",arguments)};f.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)};f.prototype._catFile=function(e,t){var r=h(t),s=["cat-file"],n=t[0];if(typeof n=="string")return this._runTask(he("Git.catFile: options must be supplied as an array of strings"),r);Array.isArray(n)&&s.push.apply(s,n);let i=e==="buffer"?yd(s):G(s);return this._runTask(i,r)};f.prototype.diff=function(e,t){let r=["diff",...T(arguments)];return typeof e=="string"&&(r.splice(1,0,e),this._logger.warn("Git#diff: supplying options as a single string is now deprecated, switch to an array of strings")),this._runTask(G(r),h(arguments))};f.prototype.diffSummary=function(){return this._runTask(Qf(T(arguments,1)),h(arguments))};f.prototype.applyPatch=function(e){let t=fr(e)?Nf(We(e),T([].slice.call(arguments,1))):he("git.applyPatch requires one or more string patches as the first argument");return this._runTask(t,h(arguments))};f.prototype.revparse=function(){let e=["rev-parse",...T(arguments,!0)];return this._runTask(G(e,!0),h(arguments))};f.prototype.show=function(e,t){return this._runTask(G(["show",...T(arguments,1)]),h(arguments))};f.prototype.clean=function(e,t,r){let s=Yf(e),n=s&&e.join("")||W(e,K)||"",i=T([].slice.call(arguments,s?1:0));return this._runTask(zf(n,i),h(arguments))};f.prototype.exec=function(e){let t={commands:[],format:"utf-8",parser(){typeof e=="function"&&e()}};return this._runTask(t)};f.prototype.log=function(e){let t=h(arguments);if(K(arguments[0])&&K(arguments[1]))return this._runTask(he("git.log(string, string) should be replaced with git.log({ from: string, to: string })"),t);let r=Zf(Bi(arguments)||{},Jr(e)&&e||[]);return this._runTask(Jf(r.splitter,r.fields,r.commands),t)};f.prototype.clearQueue=function(){return this};f.prototype.checkIgnore=function(e,t){return this._runTask(Uf(We(W(e,fr,[]))),h(arguments))};f.prototype.checkIsRepo=function(e,t){return this._runTask(Wf(W(e,K)),h(arguments))};Gi.exports=f});var Zr=o(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.gitInstanceFactory=se.gitExportFactory=se.esModuleFactory=void 0;var Ui=tn(),re=pn(),Wi=_(),bd=$i();function Td(e){return Object.defineProperties(e,{__esModule:{value:!0},default:{value:e}})}se.esModuleFactory=Td;function kd(e,t){return Object.assign(function(...r){return e.apply(null,r)},Ui.default,t||{})}se.gitExportFactory=kd;function vd(e,t){let r=new re.PluginStore,s=Wi.createInstanceConfig(e&&(typeof e=="string"?{baseDir:e}:e)||{},t);if(!Wi.folderExists(s.baseDir))throw new Ui.default.GitConstructError(s,"Cannot use simple-git on a directory that does not exist");return Array.isArray(s.config)&&r.add(re.commandConfigPrefixingPlugin(s.config)),s.progress&&r.add(re.progressMonitorPlugin(s.progress)),s.timeout&&r.add(re.timeoutPlugin(s.timeout)),s.spawnOptions&&r.add(re.spawnOptionsPlugin(s.spawnOptions)),r.add(re.errorDetectionPlugin(re.errorDetectionHandler(!0))),s.errors&&r.add(re.errorDetectionPlugin(s.errors)),new bd(s,r)}se.gitInstanceFactory=vd});var Vi=o(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.gitP=void 0;var Od=me(),Cd=Zr(),Ed=["customBinary","env","outputHandler","silent"],Hi=["add","addAnnotatedTag","addConfig","addRemote","addTag","applyPatch","binaryCatFile","branch","branchLocal","catFile","checkIgnore","checkIsRepo","checkout","checkoutBranch","checkoutLatestTag","checkoutLocalBranch","clean","clone","commit","cwd","deleteLocalBranch","deleteLocalBranches","diff","diffSummary","exec","fetch","getRemotes","init","listConfig","listRemote","log","merge","mergeFromTo","mirror","mv","pull","push","pushTags","raw","rebase","remote","removeRemote","reset","revert","revparse","rm","rmKeepLocal","show","stash","stashList","status","subModule","submoduleAdd","submoduleInit","submoduleUpdate","tag","tags","updateServerInfo"];function Sd(...e){let t,r=Promise.resolve();try{t=Cd.gitInstanceFactory(...e)}catch(d){r=Promise.reject(d)}function s(){return i}function n(){return r}let i=[...Ed,...Hi].reduce((d,g)=>{let u=Hi.includes(g),l=u?a(g,t):c(g,t,d);return Object.defineProperty(d,g,{enumerable:!1,configurable:!1,value:t?l:u?n:s}),d},{});return i;function a(d,g){return function(...u){if(typeof u[u.length]=="function")throw new TypeError("Promise interface requires that handlers are not supplied inline, trailing function not allowed in call to "+d);return r.then(function(){return new Promise(function(l,b){let j=(R,v)=>{if(R)return b(Pd(R));l(v)};u.push(j),g[d].apply(g,u)})})}}function c(d,g,u){return(...l)=>(g[d](...l),u)}}dr.gitP=Sd;function Pd(e){return e instanceof Error?e:typeof e=="string"?new Error(e):new Od.GitResponseError(e)}});var Yi=o((bg,zi)=>{var{gitP:Rd}=Vi(),{esModuleFactory:wd,gitInstanceFactory:Md,gitExportFactory:Dd}=Zr();zi.exports=wd(Dd(Md,{gitP:Rd}))});var He=ts(_s()),Ki=ts(Yi()),ne=(0,Ki.default)();try{let e=He.getInput("who-to-greet");console.log(`Hello --=${e}=--`);let t=new Date().toTimeString();He.setOutput("time",t);function r(){return rs(this,null,function*(){let s=yield ne.status();console.log(s),yield ne.checkout("master"),yield ne.checkoutLocalBranch("branch-a"),yield ne.merge(["branch-b"]);let n=yield ne.status(),i=yield ne.log(["-4"]);yield ne.checkout("master"),yield ne.deleteLocalBranch("branch-a",!0),console.log(n),console.log(i)})}r()}catch(e){He.setFailed(e.message)}
